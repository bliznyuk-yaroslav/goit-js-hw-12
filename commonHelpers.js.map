{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const list = document.querySelector('.todo-list');\nexport default function createMarkup(images){\n    const markup = images\n    .map(\n        ({\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return  `<li class=\"photo-main-list\">\n          \n            <a class=\"galery-link\"  href=\"${largeImageURL}\">\n            <img class=\"photo\" width=\"360\" height=\"200\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            \n              <ul class='list-menu'>\n                <li class='description'>\n                  <h3 class='title'>Likes</h3>\n                  <p class='datas'>${likes}</p>\n                </li>\n                <li class='description'>\n                  <h3 class='title'>Views</h3>\n                  <p class='datas'>${views}</p>\n                </li>\n                <li class='description'>\n                  <h3 class='title'>Comments</h3>\n                  <p class='datas'>${comments}</p>\n                </li>\n                <li class='description'>\n                  <h3 class='title'>Downloads</h3>\n                  <p class='datas'>${downloads}</p>\n                </li>\n              </ul>\n            </li>`;\n        }\n    )\n    .join('');\n\n    list.insertAdjacentHTML('beforeend', markup)\n}","\nimport axios from 'axios';\nconst KEY = '42673645-b4144b7e03e5200cdf63068f8';\nconst BASE_URI = 'https://pixabay.com/api/';\nconst IMAGE_TYPE = 'photo';\nconst ORIENTATION = 'horizontal'\nconst SAFESEARCH = 'true';\n\nexport default async function getNewImages(query, amount, page){\n    try{\n        const LINK = `${BASE_URI}?key=${KEY}&q=${query}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&per_page=${amount}&page=${page}`;\n        const res = await axios.get(LINK);\n        if(res.status !==200){\nthrow new Error('Image is not found!!!');\n        }\n        return res.data;\n    } catch(error){\n        console.error('Error occurred while fetching new photos:', error)\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport createMarkup from './js/render-functions';\nimport getNewImages from \"./js/pixabay-api\";\n\nconst list = document.querySelector('.todo-list');\nconst searchInput = document.querySelector('.input-text');\nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\n\nconst form = document.querySelector('.main-form');\n\nconst load = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.todo-list a.galery-link',{\n    captionsData: 'alt',\n    captionDelay: 500,\n});\nlet currentQuery;\nlet currentPage = 1;\n\nasync function handler(event){\n    event.preventDefault();\n    list.innerHTML = null;\n    const query = searchInput.value.trim();\n    try {\n        const data = await getNewImages( query, 15, 1);\n        if( data.hits.length === 0){\n            list.innerHTML = '';\n            load.style.display = 'none';\n            loadMoreBtn.classList.add('is-hidden');\n            return handlerError();\n        }\n        else{\n            createMarkup(data.hits);\n            lightbox.refresh();\n            currentQuery = query;\n            currentPage = 1\n            load.style.display = 'none';\n            if(data.hits.length < 15 ){\n                loadMoreBtn.style.display = 'none';\n                handlerErrorResult();\n            }\n            else{\n                loadMoreBtn.style.display = 'block';\n            }\n        }\n    }\n    catch(error){\n        console.error(error);\n    }\n}\n    form.addEventListener('submit', handler);\n\n    function loadImages(e) {\n        e.preventDefault();\n        let currentQuery = searchInput.value;\n      \n        list.insertAdjacentElement('afterend', load);\n        load.style.display = 'inline-block';\n        currentPage++;\n      \n        getNewImages(currentQuery, 15, currentPage).then(data => {\n          if (data.hits.length === 0) {\n            load.style.display = 'none';\n            loadMoreBtn.style.display = 'none';\n            return handlerErrorResult();\n          } else {\n            createMarkup(data.hits);\n            lightbox.refresh();\n            load.style.display = 'none';\n            const boxFotos = list;\n            const rect = boxFotos.getBoundingClientRect();\n            window.scrollBy(0, rect.height * 2);\n      \n            if (data.hits.length < 15) {\n              loadMoreBtn.style.display = 'none';\n              handlerErrorResult();\n            } else {\n              loadMoreBtn.style.display = 'block';\n            }\n          }\n        });\n      }\n      loadMoreBtn.addEventListener('click', loadImages);\n\nfunction handlerError(){\n    iziToast.error({\n        maxWidth: '432px',\n        messageSize: '16px',\n        titleColor: ' #fafafb',\n        messageColor: '#fff',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        closeOnEscape: true,\n        position: 'topRight',\n        backgroundColor: '#ed6f7c',\n    });\n}\n\nfunction handlerErrorResult() {\n    iziToast.error({\n      maxWidth: '432px',\n      messageSize: '16px',\n      titleColor: ' #fafafb',\n      messageColor: '#fff',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      closeOnEscape: true,\n      position: 'topRight',\n      backgroundColor: '#ed6f7c',\n    });\n  }"],"names":["list","createMarkup","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","KEY","BASE_URI","IMAGE_TYPE","ORIENTATION","SAFESEARCH","getNewImages","query","amount","page","LINK","res","axios","error","searchInput","loadMoreBtn","form","load","lightbox","SimpleLightbox","currentQuery","currentPage","handler","event","data","handlerError","handlerErrorResult","loadImages","e","rect","iziToast"],"mappings":"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"}